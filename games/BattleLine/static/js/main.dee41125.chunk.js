(this["webpackJsonpclient-single-player"]=this["webpackJsonpclient-single-player"]||[]).push([[0],[,,,,,function(e,t,a){"use strict";var r=a(25),n=a(12),s=a(8),i=a(9),l=a(13),u=a(28),c=function(){function e(t,a){var r;s(this,e),this.turn=null,this.troopDeck=[],this.flags=[],this.players=(n(r={},t,[]),n(r,a,[]),r)}return i(e,[{key:"newGame",value:function(){this.turn={player:this.getPlayersIDArray()[e.generateRandom(2)],turnStatus:e.playStatus},this.troopDeck=[];for(var t=0;t<l.numberOfValues;t++)for(var a=0;a<l.numberOfColors;a++)this.troopDeck.push(new l(t,a));e.shuffle(this.troopDeck),this.flags=[];for(var r=0;r<e.numberOfFlags;r++)this.flags.push(new u(this.getPlayersIDArray()[0],this.getPlayersIDArray()[1],r));for(var n in this.players)for(this.players[n]=[];this.players[n].length<e.initialDraw;)this.players[n].push(this.troopDeck.pop())}},{key:"playTroop",value:function(t,a,r){if(!this.players[t]||this.turn.player!=t||this.turn.turnStatus!==e.playStatus||r<0||r>=e.numberOfFlags||!e.handContainsTroopCard(this.players[t],a))return!1;if(this.flags[r].play(t,a)){var n;for(n=0;this.players[t]&&!this.players[t][n].isSameCardAs(a);n++);return this.players[t].splice(n,1),this.turn.turnStatus=e.drawStatus,!0}return!1}},{key:"drawTroopCard",value:function(t){return!(!this.players[t]||this.turn.player!=t||this.turn.turnStatus!==e.drawStatus)&&(this.troopDeck.length>0?(a=this.troopDeck.pop(),this.players[t].push(a)):a=l.noCard,this.turn.turnStatus=e.claimStatus,a);var a}},{key:"claim",value:function(t,a){return!(!this.players[t]||this.turn.player!=t||this.turn.turnStatus!==e.claimStatus||a<0||a>=e.numberOfFlags)&&(!!this.flags[a].claim(t)||(this.turn.turnStatus=e.endTurnStatus,!1))}},{key:"endTurn",value:function(t){return!(!this.players[t]||this.turn.player!=t||this.turn.turnStatus!==e.endTurnStatus&&this.turn.turnStatus!==e.claimStatus)&&(this.turn.player=this.getOtherPlayerID(this.turn.player),this.turn.turnStatus=e.playStatus,!0)}},{key:"whoWonTheGame",value:function(){var e,t=this.getPlayersIDArray(),a=r(t);try{for(a.s();!(e=a.n()).done;){var n=e.value;if(this.hasWonTheGame(n))return n}}catch(s){a.e(s)}finally{a.f()}return!1}},{key:"hasWonTheGame",value:function(t){var a=this.flags.filter((function(e){return e.isTakenBy==t}));return a.length>=5||!!e.get3ConsecutiveFlags(a)}},{key:"getPlayersIDArray",value:function(){return Object.keys(this.players)}},{key:"getOtherPlayerID",value:function(e){for(var t in this.players)if(t!=e)return t;return null}},{key:"getIDPlayerTurn",value:function(){return this.turn.player}}],[{key:"get3ConsecutiveFlags",value:function(e){for(var t=e.sort((function(e,t){return e.position-t.position})),a=1,r=0;r<t.length-1;r++)if(t[r].position+1==t[r+1].position){if(3==++a)return!0}else a=1;return!1}},{key:"shuffle",value:function(t){for(var a=0;a<t.length;a++)e.swapInArray(t,a,e.generateRandom(t.length))}},{key:"swapInArray",value:function(e,t,a){var r=e[t];e[t]=e[a],e[a]=r}},{key:"generateRandom",value:function(e){return Math.floor(Math.random()*e)}},{key:"handContainsTroopCard",value:function(e,t){var a,n=r(e);try{for(n.s();!(a=n.n()).done;){if(a.value.isSameCardAs(t))return!0}}catch(s){n.e(s)}finally{n.f()}return!1}}]),e}();c.numberOfFlags=9,c.initialDraw=7,c.playStatus=0,c.drawStatus=1,c.claimStatus=2,c.endTurnStatus=3,c.statusNames=["Play a card","Draw a card","Claim a Flag","Finish turn"],e.exports=c},,,,,,,,function(e,t,a){"use strict";var r=a(8),n=a(9),s=function(){function e(t,a){r(this,e),this.value=t,this.color=a}return n(e,[{key:"toString",value:function(){return"[".concat(this.value,"-").concat(e.colorNames[this.color],"]")}},{key:"isSameCardAs",value:function(e){return this.value===e.value&&this.color===e.color}}]),e}();s.red=0,s.green=1,s.blue=2,s.yellow=3,s.purple=4,s.orange=5,s.colorNames=["red","green","blue","yellow","purple","orange"],s.numberOfColors=6,s.names=["Skirmishers","Peltasts","Javalineers","Hoplites","Phalangists","Hypaspists","Light Cavary","Heavy Cavary","Chariots","Elephants"],s.numberOfValues=10,s.noCard=new s(-1,-1),e.exports=s},function(e,t,a){e.exports=a.p+"static/media/Red_flag.17e71f16.png"},function(e,t,a){e.exports=a.p+"static/media/card_back.8698b6a0.png"},function(e,t,a){e.exports=a(35)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,function(e,t,a){"use strict";var r=a(12),n=a(8),s=a(9),i=(a(13),a(29));e.exports=function(){function e(t,a,s){var i;n(this,e),this.position=s,this.sides=(r(i={},t,[]),r(i,a,[]),i),this.isTakenBy=null}return s(e,[{key:"play",value:function(e,t){return null===this.isTakenBy&&(!(this.sides[e]&&this.sides[e].length>=3)&&(this.sides[e].push(t),!0))}},{key:"claim",value:function(e){var t=this.getOtherPlayerID(e);return null===this.isTakenBy&&(!(this.sides[e]&&this.sides[e].length<3||this.sides[t]&&this.sides[t].length<3)&&(i.isBetterHand(this.sides[e],this.sides[t])>=0&&(this.isTakenBy=e,!0)))}},{key:"getOtherPlayerID",value:function(e){for(var t in this.sides)if(t!=e)return t;return null}}]),e}()},function(e,t,a){"use strict";var r=a(8),n=a(9),s=function(){function e(){r(this,e)}return n(e,null,[{key:"getSortedCopy",value:function(e){return e.sort((function(e,t){return e.value-t.value}))}},{key:"printPlay",value:function(e){return e.join(" ")}},{key:"isConsecutive",value:function(e){for(var t=this.getSortedCopy(e),a=0;a<t.length-1;a++)if(t[a].value+1!==t[a+1].value)return!1;return!0}},{key:"isSameColor",value:function(e){return e.every((function(t){return t.color===e[0].color}))}},{key:"isSameValues",value:function(e){return e.every((function(t){return t.value===e[0].value}))}},{key:"getScore",value:function(e){return e.reduce((function(e,t){return e+t.value}),0)}},{key:"getTypeHand",value:function(t){return t.length<3?e.Host:e.isSameColor(t)&&e.isConsecutive(t)?e.Wedge:e.isSameValues(t)?e.Phalanx:e.isSameColor(t)?e.Battalion:e.isConsecutive(t)?e.Skirmush:e.Host}},{key:"isBetterHand",value:function(t,a){var r=e.getTypeHand(t),n=e.getTypeHand(a);return r===n?e.getScore(t)-e.getScore(a):r-n}}]),e}();s.Wedge=4,s.Phalanx=3,s.Battalion=2,s.Skirmush=1,s.Host=0,s.playNames=["Host","Skirmush","Battalion","Phalanx","Wedge"],e.exports=s},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(10),i=a.n(s),l=(a(21),a(6)),u=a(1),c=a(2),o=a(7),h=a(4),d=a(3),p=(a(22),a(23),a(14)),f=a.n(p),m=(a(24),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={},r}return Object(c.a)(a,[{key:"render",value:function(){return this.props.card?n.a.createElement("div",{className:"card-holder card-holder--bg-color-"+this.props.card.color},this.props.card.value):n.a.createElement("div",{className:"card-holder--empty"})}}]),a}(r.Component)),y=a(5),v=a.n(y),g=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={},r}return Object(c.a)(a,[{key:"handleClick",value:function(){this.props.currentAction===v.a.claimStatus&&this.props.handleClaimFlag(this.props.position),this.props.handleClickFlag(this.props.position)}},{key:"renderSide",value:function(e){var t=this;return[2,1,0].map((function(a){return n.a.createElement(m,{key:a,card:t.props.flagInfo.sides[e][a]})}))}},{key:"renderImageClassesStatus",value:function(){if(this.props.flagInfo.taken)return"flag-image--grayscale";var e="flag-image";return(this.props.currentAction===v.a.claimStatus||this.props.selectedCard)&&(e+=" flag-image--bouncing"),e}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"flag",onClick:function(){return e.handleClick()}},this.renderSide(this.props.p1ID),n.a.createElement("img",{className:this.renderImageClassesStatus(),src:f.a,alt:"red flag"}),this.renderSide(this.props.p2ID))}}]),a}(r.Component),C=a(15),k=a.n(C),S=(a(30),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={cardsLeft:60},r}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"deck",onClick:this.props.handleTroopDraw},n.a.createElement("img",{className:"deckImage",src:k.a,alt:"deck"}),n.a.createElement("p",null,this.state.cardsLeft))}}]),a}(r.Component)),D=(a(31),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).handleCardClick=function(){var e=r.props.card,t=r.props.playerID;r.props.selectedCard&&r.props.selectedCard.isSameCardAs(r.props.card)&&(e=null,t=null),r.props.handleSelectedCard(e,t)},r.state={},r}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"aspect-container"},n.a.createElement("div",{className:"aspect-125"}),n.a.createElement("div",{onClick:this.handleCardClick,className:"card card--bg-color-"+this.props.card.color+" "+(this.props.selectedCard&&this.props.selectedCard.isSameCardAs(this.props.card)?"card--selected":"")},n.a.createElement("div",{className:"card--top-left-corner"},this.props.card.value),n.a.createElement("div",{className:"card-middle"}),n.a.createElement("div",{className:"card--bottom-right-corner"},this.props.card.value)))}}]),a}(r.Component)),b=(a(32),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).setState={},r}return Object(c.a)(a,[{key:"renderCards",value:function(){var e=this;return this.props.hand.map((function(t){return n.a.createElement(D,{key:t,card:t,selectedCard:e.props.selectedCard,handleSelectedCard:e.props.handleSelectedCard,playerID:e.props.playerID})}))}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("h4",{className:"centered"},this.props.playerID),n.a.createElement("div",{className:"hand-player"},this.renderCards()))}}]),a}(r.Component)),I=(a(33),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={fade:"faded"},r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.props.renderingComponent.remove()}),5e4)}},{key:"render",value:function(){return n.a.createElement("div",{className:"show-message show-message--"+this.props.kind+" "+this.state.fade},this.props.message)}}]),a}(r.Component));var O=function(e,t){var a=document.querySelector("#mainContainer"),r=document.createElement("div");a.appendChild(r),i.a.render(n.a.createElement(I,{message:e,renderingComponent:r,kind:t}),r)},E=(a(34),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={},r}return Object(c.a)(a,[{key:"renderAction",value:function(){return v.a.statusNames[this.props.currentAction]}},{key:"renderEndTurn",value:function(){return(this.props.currentAction===v.a.claimStatus||this.props.currentAction===v.a.endTurnStatus)&&n.a.createElement("h2",{onClick:this.props.handleEndTurn},"End Turn")}},{key:"render",value:function(){return n.a.createElement("div",{id:"game-status-container"},n.a.createElement("p",{class:"game-status-container--message"},"Turn: ",n.a.createElement("span",null,this.props.turnID)),n.a.createElement("p",{class:"game-status-container--message"},"Action: ",n.a.createElement("span",null,this.renderAction())),n.a.createElement("div",{id:"game-status-container--end-turn-holder"},this.renderEndTurn()))}}]),a}(r.Component)),w=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r,n;return Object(u.a)(this,a),(n=t.call(this,e)).player1ID="Jes\xfas",n.player2ID="Ana",n.game=new v.a("Jes\xfas","Ana"),n.game.newGame(),n.state={p1ID:n.player1ID,p2ID:n.player2ID,hands:(r={},Object(l.a)(r,n.player1ID,n.game.players[n.player1ID].slice()),Object(l.a)(r,n.player2ID,n.game.players[n.player2ID].slice()),r),selectedCard:null,whoSelectedCard:null,flags:new Array(9).fill().map((function(e,t){var a;return{taken:!1,position:t,sides:(a={},Object(l.a)(a,n.player1ID,[]),Object(l.a)(a,n.player2ID,[]),a)}})),turnID:n.game.turn.player,currentAction:n.game.turn.turnStatus},n.handleSelectedCard=n.handleSelectedCard.bind(Object(o.a)(n)),n.handleClickFlag=n.handleClickFlag.bind(Object(o.a)(n)),n.handleTroopDraw=n.handleTroopDraw.bind(Object(o.a)(n)),n.handleClaimFlag=n.handleClaimFlag.bind(Object(o.a)(n)),n.handleEndTurn=n.handleEndTurn.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"setNewGame",value:function(){var e,t=this;this.game.newGame(),this.setState({hands:(e={},Object(l.a)(e,this.state.p1ID,this.game.players[this.state.p1ID].slice()),Object(l.a)(e,this.state.p2ID,this.game.players[this.state.p2ID].slice()),e),flags:new Array(9).fill().map((function(e,a){var r;return{taken:!1,position:a,sides:(r={},Object(l.a)(r,t.player1ID,[]),Object(l.a)(r,t.player2ID,[]),r)}})),turnID:this.game.turn.player,currentAction:this.game.turn.turnStatus})}},{key:"handleReset",value:function(){O("New game!!","green"),this.setNewGame()}},{key:"handleSelectedCard",value:function(e,t){this.setState({selectedCard:e}),this.setState({whoSelectedCard:t})}},{key:"handleClickFlag",value:function(e){var t=this;if(this.state.selectedCard&&this.state.whoSelectedCard){if(this.game.playTroop(this.state.whoSelectedCard,this.state.selectedCard,e)){var a=this.state.flags;a[e].sides[this.state.whoSelectedCard].push(this.state.selectedCard),this.setState({flags:a});var r=this.state.hands;r[this.state.whoSelectedCard]=this.state.hands[this.state.whoSelectedCard].filter((function(e){return!e.isSameCardAs(t.state.selectedCard)})),this.setState({hands:r}),this.setState({currentAction:v.a.drawStatus})}else O("You can't make that play","red");this.setState({whoSelectedCard:null,selectedCard:null})}}},{key:"handleTroopDraw",value:function(){var e=this.game.drawTroopCard(this.state.turnID);if(e){O("Card Drafted","green");var t=this.state.hands;t[this.state.turnID].push(e),this.setState({hands:t,currentAction:v.a.claimStatus})}else O("You can't make that play","red")}},{key:"handleClaimFlag",value:function(e){if(this.game.claim(this.state.turnID,e)){O(this.state.turnID+" claimed the "+e+"\xba flag!!!","green");var t=this.state.flags;t[e].taken=!0,this.setState({flags:t})}else O("You can't claim that flag","red"),this.setState({currentAction:v.a.endTurnStatus})}},{key:"handleEndTurn",value:function(){this.game.endTurn(this.state.turnID)?(O("It is the turn of "+this.game.getOtherPlayerID(this.state.turnID),"green"),this.setState({turnID:this.game.getOtherPlayerID(this.state.turnID),currentAction:v.a.playStatus})):(O("You can't finish your turn yet","red"),this.setState({currentAction:v.a.endTurnStatus}))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{id:"mainContainer"},n.a.createElement("div",{id:"reset-game-container",onClick:function(){return e.handleReset()}},n.a.createElement("h2",null,"RESET")),n.a.createElement(E,{turnID:this.state.turnID,currentAction:this.state.currentAction,handleEndTurn:this.handleEndTurn}),n.a.createElement("h1",null,"Battle Line Single Player"),n.a.createElement(b,{playerID:this.state.p1ID,hand:this.state.hands[this.state.p1ID],selectedCard:this.state.selectedCard,handleSelectedCard:this.handleSelectedCard}),n.a.createElement("div",{id:"centralSpace"},n.a.createElement("div",{id:"flags"},[0,1,2,3,4,5,6,7,8].map((function(t){return n.a.createElement(g,{p1ID:e.state.p1ID,p2ID:e.state.p2ID,flagInfo:e.state.flags[t],handleClickFlag:e.handleClickFlag,handleClaimFlag:e.handleClaimFlag,key:t,position:t,currentAction:e.state.currentAction,selectedCard:e.state.selectedCard})}))),n.a.createElement("div",{id:"deckSpace"},n.a.createElement(S,{handleTroopDraw:this.handleTroopDraw}))),n.a.createElement(b,{playerID:this.state.p2ID,hand:this.state.hands[this.state.p2ID],selectedCard:this.state.selectedCard,handleSelectedCard:this.handleSelectedCard}))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[16,1,2]]]);
//# sourceMappingURL=main.dee41125.chunk.js.map